var widgetWrapper,widgetIframe,widgetSrc="https://platform.coinfirm.com/network-members/widget";function emitEvent(e,t){var a={name:e,value:t};widgetIframe.contentWindow.postMessage(a,"*")}function initialize(){var e="true"===(widgetWrapper=document.getElementById("amlt-widget")).getAttribute("data-user-input");(widgetIframe=document.createElement("iframe")).src=widgetSrc+"?user_input="+e,widgetIframe.scrolling="no",widgetIframe.style.display="none",widgetIframe.onload=function(){widgetWrapper.querySelector("img").remove(),widgetIframe.style.display="block"},widgetWrapper.appendChild(widgetIframe)}window.addEventListener("message",function(e){if(e.data.hasOwnProperty("name")&&"AMLT_Widget_Resize"===e.data.name){console.log(e.data.value);var t=document.getElementById("amlt-widget");t.style.height=e.data.value+"px",t.querySelector("iframe").style.height=e.data.value+"px"}if(e.data.hasOwnProperty("name")&&"AMLT_Widget_Submit"===e.data.name){var a=new XMLHttpRequest;a.open("POST",widgetWrapper.getAttribute("data-url"),!0),a.setRequestHeader("Content-Type","application/json"),a.send(JSON.stringify({value:e.data.value})),a.onreadystatechange=function(){if(a.readyState===XMLHttpRequest.DONE)try{var e=JSON.parse(a.responseText);e.hasOwnProperty("message")?emitEvent("AMLT_Widget_Error",e.message):e.hasOwnProperty("success")&&emitEvent("AMLT_Widget_Success",!0)}catch(e){emitEvent("AMLT_Widget_Error","Undefined error")}},a.addEventListener("error",function(e){console.log("Error",e)},!1)}}),"loading"!==document.readyState?initialize():document.addEventListener("DOMContentLoaded",initialize);